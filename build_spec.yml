version: 0.1
component: build
timeoutInSeconds: 6000
runAs: root
shell: bash
env:
  variables:
    "testEnv" : "Hello Bala1, This is a test variable!!!"
  exportedVariables:
    - VERS

steps:
  - type: Command
    name: "Sleep"
    command: |
      sleep 10
  - type: Command
    name: "Dockerize"
    command: |
      docker build . --tag "iad.ocir.io/id204we8d65n/balaregistry/hello-bala1:1.0"
  - type: Command
    name: "Save Docker Image"
    command: |
      docker save -o hello-bala1_1.0.tar iad.ocir.io/id204we8d65n/balaregistry/hello-bala1:1.0
      #echo "docker save is not working" > hello-bala1_1.0.tar
      VERS=10.0
      
outputArtifacts:
  - name: hello-bala1
    type: BINARY
    location: hello-bala1_1.0.tar
    artifactParams:
      vers: ${VERS}
      message: ${testEnv}
